{
  "id": "memory-hybrid",
  "kind": "memory",
  "version": "2026.2.15",
  "uiHints": {
    "embedding.apiKey": {
      "label": "OpenAI API Key",
      "sensitive": true,
      "placeholder": "sk-proj-...",
      "help": "API key for OpenAI embeddings (or use ${OPENAI_API_KEY})"
    },
    "embedding.model": {
      "label": "Embedding Model",
      "placeholder": "text-embedding-3-small",
      "help": "OpenAI embedding model to use"
    },
    "lanceDbPath": {
      "label": "LanceDB Path",
      "placeholder": "~/.openclaw/memory/lancedb",
      "advanced": true
    },
    "sqlitePath": {
      "label": "SQLite Path",
      "placeholder": "~/.openclaw/memory/facts.db",
      "advanced": true
    },
    "autoCapture": {
      "label": "Auto-Capture",
      "help": "Automatically capture important information from conversations"
    },
    "autoRecall": {
      "label": "Auto-Recall",
      "help": "Inject relevant memories (true/false or object with enabled, maxTokens, maxPerMemoryChars)"
    },
    "autoRecall.maxTokens": {
      "label": "Auto-Recall max tokens",
      "help": "Cap on total tokens injected (default 800)"
    },
    "autoRecall.maxPerMemoryChars": {
      "label": "Auto-Recall max chars per memory",
      "help": "Truncate each memory to N chars; 0 = no truncation"
    },
    "autoRecall.injectionFormat": {
      "label": "Auto-Recall injection format",
      "help": "full = [backend/category] text, short = category: text, minimal = text only (saves tokens)"
    },
    "autoRecall.limit": {
      "label": "Auto-Recall limit",
      "help": "Max memories to consider for injection (default 5)"
    },
    "autoRecall.minScore": {
      "label": "Auto-Recall min score",
      "help": "Vector search minimum score 0â€“1 (default 0.3)"
    },
    "autoRecall.preferLongTerm": {
      "label": "Auto-Recall prefer long-term",
      "help": "Boost score for permanent/stable facts so they rank higher when scores are close (default false)"
    },
    "autoRecall.useImportanceRecency": {
      "label": "Auto-Recall use importance/recency",
      "help": "Combine relevance with importance and lastConfirmedAt so more important or recently confirmed facts rank higher (default false)"
    },
    "autoRecall.entityLookup": {
      "label": "Auto-Recall entity lookup",
      "help": "When prompt mentions an entity from the list, merge lookup(entity) facts into candidates (4.1)"
    },
    "autoRecall.summaryThreshold": {
      "label": "Summary threshold (chars)",
      "help": "Facts longer than this get a summary stored; 0 = disabled (default 300)"
    },
    "autoRecall.summaryMaxChars": {
      "label": "Summary max chars",
      "help": "Length of generated summary (default 80)"
    },
    "autoRecall.useSummaryInInjection": {
      "label": "Use summary in injection",
      "help": "Inject summary instead of full text when present (default true)"
    },
    "autoRecall.summarizeWhenOverBudget": {
      "label": "Summarize when over budget",
      "help": "When token cap forces dropping memories, LLM-summarize all into 2-3 sentences (1.4)"
    },
    "autoRecall.summarizeModel": {
      "label": "Summarize model",
      "placeholder": "gpt-4o-mini",
      "help": "Model for summarize-when-over-budget (default gpt-4o-mini)"
    },
    "captureMaxChars": {
      "label": "Capture max characters",
      "help": "Max characters per fact: filter in auto-capture and truncate when storing (default 5000)"
    },
    "categories": {
      "label": "Custom Categories",
      "help": "Additional memory categories beyond the defaults (preference, fact, decision, entity, other)"
    },
    "autoClassify.enabled": {
      "label": "Auto-Classify",
      "help": "Use a cheap LLM to classify 'other' facts into proper categories on capture and via CLI"
    },
    "autoClassify.model": {
      "label": "Classify Model",
      "placeholder": "gpt-4.1-nano",
      "help": "Cheap/fast model for classification (e.g. gpt-4.1-nano, gpt-4o-mini)"
    }
  },
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "embedding": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "apiKey": { "type": "string" },
          "model": {
            "type": "string",
            "enum": ["text-embedding-3-small", "text-embedding-3-large"]
          }
        },
        "required": ["apiKey"]
      },
      "lanceDbPath": { "type": "string" },
      "sqlitePath": { "type": "string" },
      "autoCapture": { "type": "boolean" },
      "autoRecall": {
        "oneOf": [
          { "type": "boolean" },
          {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "enabled": { "type": "boolean" },
              "maxTokens": { "type": "number" },
              "maxPerMemoryChars": { "type": "number" },
              "injectionFormat": {
                "type": "string",
                "enum": ["full", "short", "minimal"]
              },
              "limit": { "type": "number" },
              "minScore": { "type": "number" },
              "preferLongTerm": { "type": "boolean" },
              "useImportanceRecency": { "type": "boolean" },
              "entityLookup": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "enabled": { "type": "boolean" },
                  "entities": { "type": "array", "items": { "type": "string" } },
                  "maxFactsPerEntity": { "type": "number" }
                }
              },
              "summaryThreshold": { "type": "number" },
              "summaryMaxChars": { "type": "number" },
              "useSummaryInInjection": { "type": "boolean" },
              "summarizeWhenOverBudget": { "type": "boolean" },
              "summarizeModel": { "type": "string" }
            }
          }
        ]
      },
      "captureMaxChars": { "type": "number" },
      "categories": {
        "type": "array",
        "items": { "type": "string" },
        "description": "Custom categories to add alongside defaults"
      },
      "autoClassify": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "enabled": { "type": "boolean" },
          "model": { "type": "string" },
          "batchSize": { "type": "number" }
        }
      }
    },
    "required": ["embedding"]
  }
}
